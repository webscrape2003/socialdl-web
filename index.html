<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vajira | Tech Hub OS</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&family=JetBrains+Mono&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>


    <style>
        :root {
            --cyan: #00f2ff;
            --pink: #ff00c8;
            --bg: #02040a;
            --glass: rgba(10, 15, 30, 0.85);
            --border: rgba(0, 242, 255, 0.2);
            --sidebar-width: 280px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; cursor: crosshair; }

        body {
            font-family: 'Space Grotesk', sans-serif;
            background-color: var(--bg);
            background-image: 
                linear-gradient(rgba(0, 242, 255, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 242, 255, 0.05) 1px, transparent 1px);
            background-size: 50px 50px;
            color: white;
            overflow-x: hidden;
        }



.auth-portal {
    width: 380px;
    height: 550px;
    background: rgba(5, 10, 20, 0.98);
    border: 1px solid var(--border);
    position: relative;
    overflow: hidden;
    border-radius: 8px;
    box-shadow: 0 0 50px rgba(0, 242, 255, 0.15);
}

.portal-scanner {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 2px;
    background: linear-gradient(90deg, transparent, var(--cyan), transparent);
    animation: portal-scan 4s infinite linear;
    z-index: 5;
}

@keyframes portal-scan { 0% { top: 0; } 100% { top: 100%; } }

.auth-slider {
    display: flex;
    width: 300%; /* Three sections: Login, Signup, Phone */
    height: 100%;
    transition: transform 0.7s cubic-bezier(0.85, 0, 0.15, 1);
}

.auth-section {
    width: 33.333%;
    padding: 40px 30px;
    display: flex;
    flex-direction: column;
}

.cyber-title {
    font-size: 1.5rem;
    color: var(--cyan);
    letter-spacing: 3px;
    margin-bottom: 5px;
    text-shadow: 0 0 10px rgba(0, 242, 255, 0.5);
}

.cyber-title.pink { color: var(--pink); text-shadow: 0 0 10px rgba(255, 0, 200, 0.5); }

.cyber-subtitle {
    font-size: 0.6rem;
    color: rgba(255, 255, 255, 0.5);
    margin-bottom: 30px;
}

.cyber-input-wrap {
    display: flex;
    align-items: center;
    background: rgba(255, 255, 255, 0.03);
    border-bottom: 1px solid var(--border);
    margin-bottom: 20px;
    padding: 0 15px;
}

.cyber-input-wrap i { color: var(--cyan); font-size: 0.8rem; margin-right: 15px; }
.cyber-input-wrap.pink-border i { color: var(--pink); }

.cyber-input-wrap input {
    flex: 1;
    background: transparent;
    border: none;
    padding: 15px 0;
    color: white;
    font-family: 'JetBrains Mono';
    font-size: 0.8rem;
    outline: none;
}

.cyber-btn {
    width: 100%;
    padding: 15px;
    background: transparent;
    border: 1px solid var(--cyan);
    color: var(--cyan);
    font-family: 'Space Grotesk';
    font-weight: bold;
    letter-spacing: 2px;
    cursor: pointer;
    transition: 0.3s;
    margin-top: 10px;
}

.cyber-btn:hover { background: var(--cyan); color: black; box-shadow: 0 0 20px var(--cyan); }
.pink-bg { border-color: var(--pink); color: var(--pink); }
.pink-bg:hover { background: var(--pink); color: white; box-shadow: 0 0 20px var(--pink); }

.auth-nav-links {
    margin-top: auto;
    display: flex;
    justify-content: space-between;
    font-size: 0.65rem;
}

.auth-nav-links span { cursor: pointer; color: rgba(255, 255, 255, 0.5); transition: 0.3s; }
.auth-nav-links span:hover { color: var(--cyan); }
.auth-nav-links .highlight { color: var(--cyan); text-decoration: underline; }


        


/* Guest Button Specific Styling */
#guest-auth-container .login-primary-btn {
    position: relative;
    overflow: hidden;
    background: rgba(0, 242, 255, 0.03);
    border: 1px dashed var(--cyan);
    color: var(--cyan);
    transition: all 0.4s ease;
    text-shadow: 0 0 5px var(--cyan);
}

#guest-auth-container .login-primary-btn:hover {
    background: rgba(0, 242, 255, 0.1);
    border-style: solid;
    box-shadow: inset 0 0 15px rgba(0, 242, 255, 0.2), 0 0 10px rgba(0, 242, 255, 0.2);
    transform: translateY(-1px);
}

/* Optional: Animated Scanline for the Guest Button */
#guest-auth-container .login-primary-btn::after {
    content: "";
    position: absolute;
    top: -100%;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(
        to bottom,
        transparent,
        rgba(0, 242, 255, 0.1),
        transparent
    );
    animation: scanline-guest 3s infinite linear;
}

@keyframes scanline-guest {
    0% { top: -100%; }
    100% { top: 100%; }
}

/* Guest Button Icon spacing */
#guest-auth-container i {
    margin-right: 10px;
    font-size: 0.9rem;
    filter: drop-shadow(0 0 3px var(--cyan));
}



        

/* Makes the dot next to GUEST_MODE blink */
.pulse-dot {
    width: 6px;
    height: 6px;
    background: var(--cyan);
    border-radius: 50%;
    animation: pulse-glow 1.5s infinite;
    display: inline-block;
}

@keyframes pulse-glow {
    0% { opacity: 1; transform: scale(1); box-shadow: 0 0 2px var(--cyan); }
    50% { opacity: 0.3; transform: scale(1.2); box-shadow: 0 0 8px var(--cyan); }
    100% { opacity: 1; transform: scale(1); box-shadow: 0 0 2px var(--cyan); }
}




.tech-alert-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(10px);
    z-index: 100000;
    display: none; /* Hidden by default */
    justify-content: center;
    align-items: center;
}

.tech-alert-box {
    background: #05080f;
    border: 1px solid var(--cyan);
    width: 320px;
    padding: 20px;
    box-shadow: 0 0 30px rgba(0, 242, 255, 0.2);
    text-align: center;
    font-family: 'JetBrains Mono', monospace;
}

.alert-header {
    border-bottom: 1px solid rgba(0, 242, 255, 0.2);
    padding-bottom: 10px;
    margin-bottom: 20px;
    color: var(--cyan);
    font-size: 0.7rem;
    letter-spacing: 2px;
}

#alert-main-text {
    font-size: 1.2rem;
    font-weight: bold;
    color: white;
    margin-bottom: 10px;
}

.user-id-display {
    background: rgba(0, 242, 255, 0.1);
    padding: 10px;
    border-left: 3px solid var(--pink);
    color: var(--pink);
    font-size: 0.8rem;
    margin-bottom: 20px;
}

.alert-ok-btn {
    width: 100%;
    background: transparent;
    border: 1px solid var(--cyan);
    color: var(--cyan);
    padding: 10px;
    cursor: pointer;
    font-family: 'JetBrains Mono';
    transition: 0.3s;
}

.alert-ok-btn:hover {
    background: var(--cyan);
    color: black;
    box-shadow: 0 0 15px var(--cyan);
}



        

/* Add this to your <style> section */
.tech-container.locked {
    filter: blur(10px);
    pointer-events: none;
    user-select: none;
}


        

/* Fix the submenu alignment (First Image) */
.submenu-container {
    display: flex;
    flex-direction: column;
    padding-left: 50px; /* Aligns dots under the text */
    gap: 10px;
    margin-top: 10px;
}

.sub-item {
    display: block;
    text-decoration: none !important;
    color: rgba(255, 255, 255, 0.5);
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.75rem;
    transition: 0.3s;
}

/* Fix the Login Textboxes (Second Image) */
.login-input {
    width: 100%;
    background: #0a0f1a !important; /* Dark background */
    border: 1px solid var(--cyan) !important;
    color: var(--cyan) !important;
    padding: 12px;
    margin-bottom: 10px;
    font-family: 'JetBrains Mono', monospace;
    box-shadow: inset 0 0 5px rgba(0, 242, 255, 0.1);
}

.login-input::placeholder {
    color: rgba(0, 242, 255, 0.3);
}


.login-primary-btn {
    width: 100%;
    background: var(--cyan);
    border: none;
    padding: 12px;
    font-weight: bold;
    cursor: pointer;
    font-family: 'JetBrains Mono', monospace;
    color: black;
}



        


        #top-status-bar {
            position: fixed;
            top: 25px;
            right: 25px;
            z-index: 950;
            display: flex;
            align-items: center;
            gap: 15px;
            font-family: 'JetBrains Mono';
        }

        .status-connection {
            background: rgba(0, 0, 0, 0.5);
            padding: 8px 12px;
            border: 1px solid rgba(0, 242, 255, 0.1);
            font-size: 0.65rem;
            color: var(--cyan);
            display: flex;
            align-items: center;
            gap: 8px;
            backdrop-filter: blur(5px);
        }

        #login-trigger {
            background: var(--glass);
            border: 1px solid var(--border);
            padding: 10px 18px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            font-family: 'JetBrains Mono';
            font-size: 0.75rem;
            transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
        }

        #login-trigger i {
            color: var(--cyan);
            font-size: 1.1rem;
        }

        #login-trigger:hover {
            border-color: var(--cyan);
            box-shadow: 0 0 15px rgba(0, 242, 255, 0.3);
            transform: translateY(-2px);
        }

        #login-trigger:active {
            transform: translateY(0);
        }

        /* Mobile adjustment */
        @media (max-width: 480px) {
            #top-status-bar span { display: none; } /* Hide text on small screens, keep icons */
            #login-trigger { padding: 10px; }
        }



        
        .login-overlay {
            position: fixed;
            inset: 0;
            background: rgba(2, 4, 10, 0.95); /* Deep dark background */
            backdrop-filter: blur(20px);
            z-index: 99999; /* Ensure it is above EVERYTHING */
            display: none; /* Controlled by JS */
            justify-content: center;
            align-items: center;
        }

        


/* Enhanced Login UI */
.login-box {
    background: rgba(5, 8, 15, 0.95);
    border: 1px solid var(--cyan);
    padding: 30px;
    width: 90%;
    max-width: 400px;
    box-shadow: 0 0 40px rgba(0, 242, 255, 0.2);
    border-radius: 4px; /* Sharp technical edges */
}

.login-input {
    width: 100%;
    background: rgba(0, 242, 255, 0.05);
    border: 1px solid rgba(0, 242, 255, 0.2);
    padding: 15px;
    color: white;
    margin-bottom: 15px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.8rem;
    transition: 0.3s;
    outline: none;
}

.login-input:focus {
    border-color: var(--cyan);
    background: rgba(0, 242, 255, 0.1);
    box-shadow: 0 0 15px rgba(0, 242, 255, 0.3);
}

.login-primary-btn {
    width: 100%;
    background: var(--cyan);
    color: #000;
    border: none;
    padding: 15px;
    font-family: 'JetBrains Mono', monospace;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 2px;
    cursor: pointer;
    transition: 0.4s;
}

.login-primary-btn:hover {
    background: white;
    box-shadow: 0 0 25px white;
    transform: translateY(-2px);
}

/* Social Buttons Row */
.social-auth-grid {
    display: flex;
    gap: 15px;
    margin-bottom: 25px;
}

.social-btn {
    flex: 1;
    background: transparent;
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: white;
    padding: 15px;
    font-size: 1.2rem;
    cursor: pointer;
    transition: 0.3s;
}

.social-btn:hover {
    border-color: var(--cyan);
    background: rgba(0, 242, 255, 0.1);
    color: var(--cyan);
}



             /* Brand Colors on Hover */
        .social-btn.google:hover { border-color: #ea4335; color: #ea4335; background: rgba(234, 67, 53, 0.1); }
        .social-btn.facebook:hover { border-color: #1877f2; color: #1877f2; background: rgba(24, 119, 242, 0.1); }
        .social-btn.github:hover { border-color: #6e5494; color: #6e5494; background: rgba(110, 84, 148, 0.1); }




        


        /* Stat Rows & Progress Bars */
        .stat-row { margin-top: 15px; font-family: 'JetBrains Mono'; font-size: 0.7rem; }
        .stat-label { margin-bottom: 5px; opacity: 0.6; letter-spacing: 1px; }
        
        .progress-container {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 2px;
            margin-bottom: 5px;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: var(--cyan);
            box-shadow: 0 0 10px var(--cyan);
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .progress-bar[data-color="pink"] { background: var(--pink); box-shadow: 0 0 10px var(--pink); }

        /* Live Pulse Tag */
        .live-tag {
            font-size: 0.6rem;
            background: rgba(0, 242, 255, 0.1);
            padding: 2px 8px;
            border-radius: 10px;
            color: var(--cyan);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .pulse-dot {
            width: 6px;
            height: 6px;
            background: var(--cyan);
            border-radius: 50%;
            animation: pulse-glow 1.5s infinite;
        }

        @keyframes pulse-glow {
            0% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.3; transform: scale(1.2); }
            100% { opacity: 1; transform: scale(1); }
        }

        .card-header-flex { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 10px; }

        
        

        /* Section Divider */
        .menu-divider {
            height: 1px;
            background: linear-gradient(90deg, var(--cyan), transparent);
            margin: 20px 0;
            opacity: 0.3;
        }

        .menu-section-label {
            font-family: 'JetBrains Mono';
            font-size: 0.6rem;
            color: rgba(0, 242, 255, 0.4);
            margin-bottom: 10px;
            padding-left: 12px;
            letter-spacing: 1px;
        }

        
        /* --- SIDEBAR NAVIGATION --- */
        #sidebar {
            position: fixed;
            top: 0;
            left: calc(-1 * var(--sidebar-width));
            width: var(--sidebar-width);
            height: 100vh;
            background: #05070a;
            border-right: 1px solid var(--cyan);
            z-index: 9999;
            transition: 0.5s cubic-bezier(0.19, 1, 0.22, 1);
            padding: 40px 20px;
        }

        #sidebar.open { left: 0; }



        .menu-header {
            font-family: 'JetBrains Mono';
            color: var(--cyan);
            font-size: 0.75rem;
            letter-spacing: 2px;
            margin-bottom: 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid rgba(0, 242, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        /* Glitch Animation */
        .menu-header span {
            animation: headerFlicker 3s linear infinite;
            text-shadow: 0 0 8px rgba(0, 242, 255, 0.5);
        }

        @keyframes headerFlicker {
            0%, 90%, 100% { opacity: 1; }
            92% { opacity: 0.5; }
            95% { opacity: 0.8; }
            98% { opacity: 0.2; }
        }

        /* Close Button Hover Effect */
        .close-btn {
            transition: all 0.3s ease;
            color: rgba(255, 255, 255, 0.5);
            padding: 5px;
            border-radius: 4px;
        }

        .close-btn:hover {
            color: var(--pink);
            transform: rotate(90deg);
            background: rgba(255, 0, 200, 0.1);
            text-shadow: 0 0 10px var(--pink);
        }

        /* Scanning line effect for the header */
        .menu-header::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--cyan), transparent);
            animation: scanLine 4s linear infinite;
        }

        @keyframes scanLine {
            0% { left: -100%; }
            100% { left: 100%; }
        }




    
        /* Hover State with Glow */
        .menu-item:hover {
            color: var(--cyan);
            letter-spacing: 2.5px; /* Slight expansion effect on hover */
            text-shadow: 0 0 12px rgba(0, 242, 255, 0.8);
            background: linear-gradient(90deg, rgba(0, 242, 255, 0.1) 0%, transparent 100%);
        }

        /* Active state for the current page */
        .menu-item.active {
            color: var(--cyan);
            font-weight: 700;
            text-shadow: 0 0 15px var(--cyan);
        }

        /* Section Labels (The smaller text) */
        .menu-section-label {
            font-size: 0.55rem;
            font-weight: 700;
            color: rgba(255, 255, 255, 0.2);
            text-transform: uppercase;
            letter-spacing: 3px;
            margin-top: 25px;
            margin-bottom: 10px;
            border-left: 2px solid var(--pink);
            padding-left: 10px;
        }



        
        .menu-item {
            font-family: 'JetBrains Mono';
            padding: 12px 15px;
            margin-bottom: 5px;
            cursor: pointer;
            transition: 0.3s;
            color: rgba(255,255,255,0.5);
            font-size: 0.85rem;
            border-left: 2px solid transparent;
            display: flex;
            align-items: center;
            justify-content: flex-start;
        }

        /* Wrap icon and text in a span to control spacing */
        .menu-item span {
            display: flex;
            align-items: center;
            flex-grow: 1; /* Pushes the arrow to the right */
        }

        /* Fixed width for icons ensures text starts at the same spot */
        .menu-item i:not(.arrow) {
            width: 24px; 
            margin-right: 12px;
            display: flex;
            justify-content: center;
            font-size: 1rem;
        }

        /* Standardize the arrow positioning */
        .menu-item .arrow {
            margin-left: auto;
            font-size: 0.7rem;
        }


        
        .menu-item:hover, .menu-item.active {
            color: var(--cyan);
            background: rgba(0, 242, 255, 0.05);
            border-left: 2px solid var(--cyan);
        }

        /* Sub-menu styling */
        .submenu-container {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out;
            background: rgba(0, 0, 0, 0.2);
            margin-bottom: 10px;
        }

        
                /* Fix for API Sub-menu buttons */
        .submenu-container {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out;
            background: rgba(0, 0, 0, 0.2);
            margin-bottom: 10px;
        }

        .submenu-container.show {
            max-height: 200px;
        }

        .sub-item {
            padding: 12px 12px 12px 35px;
            font-family: 'JetBrains Mono';
            font-size: 0.75rem;
            color: rgba(255,255,255,0.4);
            cursor: pointer;
            transition: 0.3s;
        }

   .sub-item:hover {
            color: var(--pink);
            padding-left: 40px;
        }
        

        .arrow {
            transition: transform 0.3s;
            font-size: 0.7rem;
        }

        .rotate { transform: rotate(180deg); }

        #menu-trigger {
            position: fixed;
            top: 25px;
            left: 25px;
            z-index: 900;
            background: var(--glass);
            border: 1px solid var(--border);
            padding: 10px 15px;
            color: var(--cyan);
            font-family: 'JetBrains Mono';
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            gap: 10px;
            backdrop-filter: blur(10px);
        }

        /* --- LOADER --- */
        #loader {
            position: fixed;
            inset: 0;
            background: var(--bg);
            z-index: 10000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-family: 'JetBrains Mono', monospace;
        }

        .scanner {
            width: 250px;
            height: 2px;
            background: var(--cyan);
            box-shadow: 0 0 15px var(--cyan);
            animation: scan 2s infinite ease-in-out;
        }

        @keyframes scan {
            0%, 100% { transform: translateY(-40px); opacity: 0; }
            50% { transform: translateY(40px); opacity: 1; }
        }

        /* --- CONTENT WRAPPER --- */
        .tech-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 120px 20px 60px 20px;
            visibility: hidden;
            opacity: 0;
            transition: 1s ease-out;
        }

        .tech-container.active { visibility: visible; opacity: 1; }

        .view-section { display: none; }
        .view-section.active-view { display: block; animation: fadeInUp 0.5s ease-out; }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        header { margin-bottom: 60px; border-left: 4px solid var(--cyan); padding-left: 20px; }
        .glitch-title { font-size: clamp(2rem, 8vw, 3.5rem); text-transform: uppercase; line-height: 1; }

        /* --- SOCIAL CARDS --- */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px;
        }

        .card {
            background: #05080f;
            border: 1px solid rgba(0, 242, 255, 0.1);
            padding: 40px 30px;
            position: relative;
            text-decoration: none;
            color: white;
            transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
        }

        .card::after {
            content: "";
            position: absolute;
            top: 0; right: 0;
            border-style: solid;
            border-width: 0 25px 25px 0;
            border-color: transparent #00f2ff33 transparent transparent;
        }

        .card:hover {
            border-color: var(--cyan);
            background: #080c14;
        }

        .card i {
            font-size: 3rem;
            margin-bottom: 35px;
            color: var(--cyan);
            filter: drop-shadow(0 0 15px var(--cyan));
            display: inline-block;
        }

        .card h3 {
            font-family: 'JetBrains Mono';
            font-size: 1.25rem;
            margin-bottom: 15px;
            color: var(--cyan);
            letter-spacing: 1px;
            font-weight: 500;
        }

        .card p {
            font-size: 0.95rem;
            opacity: 0.6;
            line-height: 1.6;
            margin-bottom: 30px;
            font-weight: 300;
        }

        .btn-label {
            font-family: 'JetBrains Mono';
            font-size: 0.8rem;
            font-weight: 700;
            letter-spacing: 2px;
            color: white;
            border-bottom: 3px solid var(--cyan);
            padding-bottom: 6px;
            text-transform: uppercase;
            display: inline-block;
        }

        footer { margin-top: 100px; font-family: 'JetBrains Mono'; font-size: 0.65rem; text-align: center; opacity: 0.3; }

    </style>
</head>
<body>


<audio id="bg-music" loop style="display:none;">
    <source src="https://cdn401.savetube.vip/media/6N9fO8PY3Y8/alan-walker-alok-headlights-albert-vishi-remix-feat-kiddo-128-ytshorts.savetube.me.mp3" type="audio/mpeg">
</audio>

    

<div id="tech-alert" class="tech-alert-overlay">
    <div class="tech-alert-box">
        <div class="alert-header">
            <span><i class="fas fa-shield-check"></i> SYSTEM_MESSAGE</span>
        </div>
        <div class="alert-body">
            <p id="alert-main-text">ACCESS_GRANTED</p>
            <div class="user-id-display">
                <span id="alert-user-name">VAJIRA_USER</span>
            </div>
        </div>
        <button class="alert-ok-btn" onclick="closeTechAlert()">ACKNOWLEDGE</button>
    </div>
</div>
    


<div id="top-status-bar">


<div id="notification-wrapper" style="position: relative;">
    <button id="noti-trigger" onclick="toggleNotiWindow()" style="background:none; border:none; color:var(--cyan); cursor:pointer; font-size:1.2rem; position:relative;">
        <i class="fas fa-bell"></i>
        <span id="noti-badge" style="display:none; position:absolute; top:-5px; right:-5px; background:var(--pink); color:white; font-size:10px; padding:2px 5px; border-radius:50%; border:1px solid white;">0</span>
    </button>
    <div id="noti-window" style="display:none; position:absolute; top:40px; right:0; width:300px; background:#05080f; border:1px solid var(--cyan); box-shadow:0 0 20px rgba(0,242,255,0.2); z-index:1000; padding:15px; border-radius:4px;">
        <h4 style="font-family:'JetBrains Mono'; font-size:0.7rem; border-bottom:1px solid var(--border); padding-bottom:10px; margin-bottom:10px; color:var(--cyan);">SYSTEM_NOTIFICATIONS</h4>
        <div id="noti-content" style="max-height:250px; overflow-y:auto; font-size:0.75rem; font-family:'JetBrains Mono'; color:rgba(255,255,255,0.8);">
            <div style="opacity:0.5; text-align:center;">NO_NEW_DATA</div>
        </div>
    </div>
</div>



    
    <div class="status-connection">
        <span class="pulse-dot"></span>
        <span id="user-status-text">GUEST_MODE</span>
    </div>
    <button id="login-trigger" onclick="openLogin()">
        <i class="fas fa-user-circle"></i>
        <span>LOGIN</span>
    </button>
</div>






    

    
<div id="login-modal" class="login-overlay">
    <div class="auth-portal">
        <div class="portal-bg"></div>
        <div class="portal-scanner"></div>
        <i class="fas fa-xmark portal-close" onclick="closeLogin()"></i>

        <div class="auth-slider" id="auth-slider">
            
            <div class="auth-section" id="section-login">
                <div class="auth-header">
                    <h2 class="cyber-title">SYSTEM_LOGIN</h2>
                    <p class="cyber-subtitle">IDENTIFY_YOURSELF_TO_PROCEED</p>
                </div>

                <div class="social-auth-grid">
                    <button class="social-btn google" onclick="handleSocial('google')"><i class="fa-brands fa-google"></i></button>
                    <button class="social-btn github" onclick="handleSocial('github')"><i class="fa-brands fa-github"></i></button>
                    <button class="social-btn guest" onclick="handleAnonymousLogin()"><i class="fas fa-user-secret"></i></button>
                </div>

                <div class="cyber-divider"><span>OR_VIA_CREDENTIALS</span></div>

                <div class="input-container">
                    <div class="cyber-input-wrap">
                        <i class="fas fa-envelope"></i>
                        <input type="email" id="login-email" placeholder="USER_IDENTIFIER">
                    </div>
                    <div class="cyber-input-wrap">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="login-pass" placeholder="ACCESS_KEY">
                    </div>
                    <button class="cyber-btn" onclick="handleLogin()">INITIALIZE_SESSION</button>
                </div>

                <div class="auth-nav-links">
                    <span onclick="togglePhoneMode()">BYPASS_PHONE_LINK</span>
                    <span class="highlight" onclick="switchAuthMode('signup')">CREATE_NEW_ID</span>
                </div>
            </div>

            <div class="auth-section" id="section-signup">
                <div class="auth-header">
                    <h2 class="cyber-title pink">REGISTER_ID</h2>
                    <p class="cyber-subtitle">ESTABLISH_NEW_CORE_IDENTITY</p>
                </div>

                <div class="input-container">
                    <div class="cyber-input-wrap pink-border">
                        <i class="fas fa-user-plus"></i>
                        <input type="email" id="signup-email" placeholder="NEW_IDENTIFIER">
                    </div>
                    <div class="cyber-input-wrap pink-border">
                        <i class="fas fa-key"></i>
                        <input type="password" id="signup-pass" placeholder="GENERATE_KEY">
                    </div>
                    <button class="cyber-btn pink-bg" onclick="handleSignup()">GENERATE_IDENTITY</button>
                </div>

                <div class="auth-nav-links">
                    <span class="highlight" onclick="switchAuthMode('login')">RETURN_TO_LOGIN</span>
                </div>
            </div>

            <div class="auth-section" id="section-phone">
                <div class="auth-header">
                    <h2 class="cyber-title">MOBILE_LINK</h2>
                    <p class="cyber-subtitle">OTP_VERIFICATION_REQUIRED</p>
                </div>

                <div id="phone-fields">
                    <div class="cyber-input-wrap">
                        <i class="fas fa-phone"></i>
                        <input type="tel" id="phone-number" placeholder="+94 7X XXX XXXX">
                    </div>
                    <button id="send-otp-btn" class="cyber-btn" onclick="handlePhoneAuth()">SEND_OTP_KEY</button>
                    
                    <div id="otp-verify-section" style="display:none; margin-top:20px;">
                        <div class="cyber-input-wrap pink-border">
                            <i class="fas fa-shield"></i>
                            <input type="text" id="verification-code" placeholder="6-DIGIT_CODE">
                        </div>
                        <button class="cyber-btn pink-bg" onclick="verifyOtp()">VERIFY_IDENTITY</button>
                    </div>
                </div>

                <div class="auth-nav-links">
                    <span onclick="togglePhoneMode()">RETURN_TO_LOGIN</span>
                </div>
            </div>

        </div>
    </div>
</div>
<div id="recaptcha-container"></div>





    
<nav id="sidebar">
    <div class="menu-header">
        <span><i class="fas fa-microchip"></i> VAJIRA_CORE_v2.6</span>
        <i class="fas fa-xmark close-btn" onclick="toggleMenu()"></i>
    </div>
    
    <div class="menu-section-label">0x00_CORE</div>
    <div class="menu-item active" onclick="switchView('dashboard')">
        <span><i class="fas fa-chart-line"></i> DASHBOARD</span>
    </div>


<a href="admin.html" class="menu-item" style="text-decoration: none; color: var(--pink);">
    <span><i class="fas fa-user-shield"></i> ADMIN_PANEL</span>
</a>


    
    <div class="menu-divider"></div>

    <div class="menu-section-label">0x01_MODULES</div>
    
    <div class="menu-item" onclick="switchView('social-dl')">
        <span><i class="fas fa-share-nodes"></i> SOCIAL_HUB</span>
    </div>
    
    <div class="menu-item" onclick="toggleSubMenu()">
            <span><i class="fas fa-gears"></i> VAJIRA_API_HUB</span>
            <i class="fas fa-chevron-down arrow" id="api-arrow"></i>
        </div>
        <div class="submenu-container" id="api-submenu">
    <a href="https://vajira-official-apis.vercel.app" target="_blank" class="sub-item">
    <span><i class="far fa-circle"></i> OFFICIAL_API</span>
    </a><br>
    <a href="https://vajira-mv-apikeys.netlify.app" target="_blank" class="sub-item">
    <span><i class="far fa-circle"></i> MOVIE_API</span>
    </a>
</div>




    <a href="https://vajira-gpt.vercel.app" class="menu-item link-item" style="text-decoration: none;" onclick="switchView('ai-hub')">
        <span><i class="fas fa-brain"></i> VAJIRA_AI_HUB</span>
    </a>

    <a href="https://flexa-lite.42web.io" class="menu-item link-item" style="text-decoration: none;" onclick="switchView('flexa')">
        <span><i class="fas fa-bolt-lightning"></i> FLEXA_LITE</span>
    </a>
</nav>



    <div id="menu-trigger" onclick="toggleMenu()">
        <i class="fa-solid fa-bars-staggered"></i>
        <span>SYSTEM_MENU</span>
    </div>

    <div id="loader">
        <div class="scanner"></div>
        <div class="status-text" id="load-msg">BOOTING SYSTEM...</div>
    </div>

    <div class="tech-container" id="main">
        <header>
            <h1 class="glitch-title" id="view-title">Vajira<br>DASHBOARD</h1>
        </header>

        

<div id="view-dashboard" class="view-section active-view">
    <div class="grid">


<div class="card">
    <div class="card-header-flex">
        <i class="fas fa-network-wired"></i>
        <span class="live-tag"><span class="pulse-dot"></span> LIVE_TRAFFIC</span>
    </div>
    <h3>NETWORK_MONITOR</h3>
    <div class="stat-row">
        <div class="stat-label">CURRENT_ACTIVE_USERS</div>
        <div class="stat-value" id="user-count">00</div>
    </div>
    <div class="stat-row">
        <div class="stat-label">TOTAL_SYSTEM_VIEWS</div>
        <div class="stat-value" id="total-views" style="color: var(--pink);">0000</div>
    </div>
    <div class="stat-row">
        <div class="stat-label">LAST_KNOWN_LOCATION</div>
        <div id="user-location" style="font-family:'JetBrains Mono'; font-size:0.6rem; color:var(--cyan);">SYNCING...</div>
    </div>
</div>



        
        
        <div class="card">
            <div class="card-header-flex">
                <i class="fas fa-microchip"></i>
                <span class="live-tag"><span class="pulse-dot"></span> LIVE</span>
            </div>
            <h3>SYSTEM_PERFORMANCE</h3>
            <div class="stat-row">
                <div class="stat-label">CPU_LOAD</div>
                <div class="progress-container"><div class="progress-bar" id="cpu-bar" style="width: 45%"></div></div>
                <div class="stat-value" id="cpu-text">45%</div>
            </div>
            <div class="stat-row">
                <div class="stat-label">RAM_USAGE</div>
                <div class="progress-container"><div class="progress-bar" id="ram-bar" style="width: 62%" data-color="pink"></div></div>
                <div class="stat-value" id="ram-text">62%</div>
            </div>
        </div>

        <div class="card">
    <div class="card-header-flex">
        <i class="fas fa-battery-three-quarters" id="bat-icon"></i>
        <span id="pwr-status" style="font-size: 0.6rem; color: var(--cyan);">SYSTEM_CHECKING...</span>
    </div>
    <h3>POWER_MANAGEMENT</h3>
    <div class="stat-row">
        <div class="stat-label">REAL_TIME_CAPACITY</div>
        <div class="progress-container">
            <div class="progress-bar" id="bat-bar" style="width: 0%; transition: width 1s ease;"></div>
        </div>
        <div class="stat-value" id="bat-text">--%</div>
    </div>
    <p style="font-size: 0.7rem; margin-top: 10px; opacity: 0.5;">
        HEALTH: <span style="color:#00ff88">OPTIMAL</span>
    </p>
</div>


        <div class="card">
            <i class="fas fa-database"></i>
            <h3>STORAGE_ALLOCATION</h3>
            <div class="stat-row">
                <div class="stat-label">SSD_MAIN_PARTITION</div>
                <div class="progress-container"><div class="progress-bar" style="width: 78%"></div></div>
                <div class="stat-value">182GB / 256GB</div>
            </div>
            <div class="mini-graph" style="margin-top:15px; display:flex; gap:2px;">
                <div style="height:10px; width:20%; background:var(--cyan);"></div>
                <div style="height:10px; width:45%; background:var(--pink);"></div>
                <div style="height:10px; width:15%; background:gray;"></div>
            </div>
        </div>

        <div class="card">
            <i class="fas fa-shield-halved"></i>
            <h3>SECURITY_FIREWALL</h3>
            <div id="sys-logs" style="font-family:'JetBrains Mono'; font-size:0.6rem; color:rgba(255,255,255,0.4); height:80px; overflow:hidden;">
                <div>> INITIALIZING FIREWALL...</div>
                <div>> SCANNING PORT 443...</div>
                <div>> ENCRYPTED_TUNNEL: ACTIVE</div>
            </div>
        </div>
    </div>
</div>



        <div id="view-social-dl" class="view-section">
            <div class="grid">
                <a href="ytdl.html" class="card">
                    <i class="fa-brands fa-youtube"></i>
                    <h3>01. YOUTUBE_DOWNLOADER</h3>
                    <p>Advanced decoding for 4K video streams and high-bitrate audio packets.</p>
                    <span class="btn-label">INITIATE_DOWNLOAD</span>
                </a>
                <a href="tiktok.html" class="card">
                    <i class="fa-brands fa-tiktok"></i>
                    <h3>02. TIKTOK_DOWNLOADER</h3>
                    <p>Securely strip metadata and watermarks from global TikTok content nodes.</p>
                    <span class="btn-label">INITIATE_DOWNLOAD</span>
                </a>
                <a href="fb.html" class="card">
                    <i class="fa-brands fa-facebook"></i>
                    <h3>03. FB DOWNLOADER</h3>
                    <p>High-speed retrieval of encrypted Facebook Reels and private video data.</p>
                    <span class="btn-label">INITIATE_DOWNLOAD</span>
                </a>
                <a href="twitter.html" class="card">
                    <i class="fa-brands fa-x-twitter"></i>
                    <h3>04. TWITTER_DOWNLOADER</h3>
                    <p>Fetch high-quality media from X (Twitter) threads and video posts instantly.</p>
                    <span class="btn-label">INITIATE_DOWNLOAD</span>
                </a>
                <a href="pinterest.html" class="card">
                    <i class="fa-solid fa-palette"></i>
                    <h3>05. PINTEREST_PRO</h3>
                    <p>Extract high-definition visual assets, artistic renders, and 4K video pins.</p>
                    <span class="btn-label">INITIATE_DOWNLOAD</span>
                </a>
                <a href="capcut.html" class="card">
                    <i class="fa-solid fa-microchip"></i>
                    <h3>06. CAPCUT_DL</h3>
                    <p>Direct access to project assets and premium cloud template buffers.</p>
                    <span class="btn-label">INITIATE_DOWNLOAD</span>
                </a>
                <a href="pc-game.html" class="card">
                    <i class="fa-solid fa-gamepad"></i>
                    <h3>07. PC_GAME_DL</h3>
                    <p>High-performance binaries, DirectX optimized assets, and game files.</p>
                    <span class="btn-label">INITIATE_DOWNLOAD</span>
                </a>
                <a href="apk.html" class="card">
                    <i class="fa-solid fa-terminal"></i>
                    <h3>08. APK_DOWNLOADER</h3>
                    <p>Verified software packages, modded binaries, and system apps.</p>
                    <span class="btn-label">INITIATE_DOWNLOAD</span>
                </a>
            </div>
        </div>

        <div id="view-official-api" class="view-section">
            <div class="card"><h3>VAJIRA_OFFICIAL_API</h3><p>Official developer documentation and endpoint access. Status: AUTHORIZED_ONLY.</p></div>
        </div>
        <div id="view-movie-api" class="view-section">
            <div class="card"><h3>VAJIRA_MOVIE_API</h3><p>High-speed movie database and streaming stream buffers. Status: LINK_PENDING.</p></div>
        </div>

        <div id="view-ai-hub" class="view-section">
            <div class="card"><h3>VAJIRA_AI_HUB</h3><p>Neural engine offline. Please initialize via local console.</p></div>
        </div>
        <div id="view-flexa" class="view-section">
            <div class="card"><h3>FLEXA_LITE</h3><p>Loading lightweight UI for low-bandwidth environments...</p></div>
        </div>

        <footer>[ VAJIRA_OS v.2.6.0 ] â€” ENCRYPTED CONNECTION</footer>
    </div>



<div id="cbox-float-container" style="position: fixed; bottom: 25px; right: 25px; z-index: 999999;">
    <div id="cbox-bubble" onclick="toggleCbox()" style="width: 60px; height: 60px; background: #00f2ff; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 0 20px rgba(0, 242, 255, 0.5); border: 2px solid white; transition: 0.3s;">
        <i class="fas fa-comments" style="color: #000; font-size: 24px;"></i>
    </div>

    <div id="cbox-window" style="display: none; position: absolute; bottom: 80px; right: 0; width: 350px; height: 500px; background: #05080f; border: 1px solid #00f2ff; border-radius: 8px; overflow: hidden; box-shadow: 0 0 30px rgba(0, 242, 255, 0.2);">
        <iframe src="https://my.cbox.ws/VajiraOfficial" width="100%" height="100%" allowtransparency="yes" allow="autoplay" frameborder="0" marginheight="0" marginwidth="0" scrolling="auto"></iframe>
    </div>
</div>


    
    <script>





  
        

   function toggleCbox() {
        const windowEl = document.getElementById('cbox-window');
        const bubble = document.getElementById('cbox-bubble');
        
        if (windowEl.style.display === 'none') {
            windowEl.style.display = 'block';
            bubble.style.transform = 'rotate(90deg)';
            bubble.style.background = '#ff00c8'; // Changes to pink when open
            bubble.style.boxShadow = '0 0 20px rgba(255, 0, 200, 0.5)';
        } else {
            windowEl.style.display = 'none';
            bubble.style.transform = 'rotate(0deg)';
            bubble.style.background = '#00f2ff'; // Back to cyan
            bubble.style.boxShadow = '0 0 20px rgba(0, 242, 255, 0.5)';
        }
    }     



        
        // Loading
        const msgs = ["BYPASSING...", "SYNCING...", "LOADING UI...", "READY."];
        let i = 0;
        const msgEl = document.getElementById('load-msg');
        setInterval(() => { if(i < msgs.length) { msgEl.innerText = msgs[i]; i++; } }, 400);



window.addEventListener('load', () => {
    const music = document.getElementById('bg-music');
    music.volume = 0.5;
    const playMusic = () => {
        music.play().then(() => {
            console.log("Audio started successfully");
        }).catch(err => {
            console.log("Waiting for user interaction to play audio...");
            document.addEventListener('click', () => {
                music.play();
            }, { once: true });
        });
    };
    setTimeout(playMusic, 2500); 
});


        

        
window.addEventListener('load', () => {
    setTimeout(() => {
        document.getElementById('loader').style.opacity = '0';
        setTimeout(() => {
            document.getElementById('loader').style.display = 'none';
            
            // 1. Show the main container but keep it "locked" (blurred)
            document.getElementById('main').classList.add('active');
            document.getElementById('main').classList.add('locked');
            
            // 2. Automatically trigger the login modal
            openLogin(); 
        }, 800);
    }, 2000);
});






        
        
// Firebase Configuration (Replace with your own from Firebase Console)
const firebaseConfig = {
  apiKey: "AIzaSyD6wnG-Gd-UIuNOtCHG3r7cxTFqTh9MyHc",
  authDomain: "vajiraofficial-55739.firebaseapp.com",
  databaseURL: "https://vajiraofficial-55739-default-rtdb.firebaseio.com",
  projectId: "vajiraofficial-55739",
  storageBucket: "vajiraofficial-55739.firebasestorage.app",
  messagingSenderId: "837876706312",
  appId: "1:837876706312:web:25ed963765947587c275bd",
  measurementId: "G-5NBJ5CLWX4"
};




// --- 2. INITIALIZE FIREBASE FIRST ---
if (!firebase.apps.length) {
    firebase.initializeApp(firebaseConfig);
}

// --- 3. NOW START DATABASE FEATURES ---
const db = firebase.database();
const myStatusRef = db.ref('status/users').push();
const totalViewsRef = db.ref('status/totalViews');

// A. Handle Total Page Views (Increments once per load)
totalViewsRef.transaction((current) => (current || 0) + 1);

totalViewsRef.on('value', (snapshot) => {
    const views = snapshot.val() || 0;
    if(document.getElementById('total-views')) {
        document.getElementById('total-views').innerText = views.toString().padStart(4, '0');
    }
});

// B. Handle Live User Connections & Location
db.ref('.info/connected').on('value', (snapshot) => {
    if (snapshot.val() === true) {
        myStatusRef.onDisconnect().remove(); // Remove user when tab closes
        
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition((pos) => {
                myStatusRef.set({ status: 'online', lat: pos.coords.latitude, lng: pos.coords.longitude });
            }, () => {
                myStatusRef.set({ status: 'online', lat: 'HIDDEN' });
            });
        }
    }
});

// C. Update UI for Live Users
db.ref('status/users').on('value', (snapshot) => {
    const count = snapshot.numChildren();
    if(document.getElementById('user-count')) {
        document.getElementById('user-count').innerText = count.toString().padStart(2, '0');
    }
    
    snapshot.forEach((child) => {
        const data = child.val();
        if(data.lat && data.lat !== 'HIDDEN' && document.getElementById('user-location')) {
            document.getElementById('user-location').innerText = `${data.lat.toFixed(2)}, ${data.lng.toFixed(2)}`;
        }
    });
});




        

function showTechAlert(mainText, userName) {
    document.getElementById('alert-main-text').innerText = mainText;
    document.getElementById('alert-user-name').innerText = userName;
    document.getElementById('tech-alert').style.display = 'flex';
}

function closeTechAlert() {
    document.getElementById('tech-alert').style.display = 'none';
}

function unlockSystem(username) {
    // Replace alert() with our custom UI
    showTechAlert("ACCESS_GRANTED", username);
    
    // Original unlock logic
    closeLogin();
    document.getElementById('main').classList.remove('locked');
    document.getElementById('user-status-text').innerText = username;
}



        

// STEP 2: Initialize Firebase
if (!firebase.apps.length) {
    firebase.initializeApp(firebaseConfig);
}
const auth = firebase.auth();

// STEP 3: The Real Login Function
function handleLogin() {
    const email = document.getElementById('login-email').value;
    const pass = document.getElementById('login-pass').value;

    if (!email.includes('@')) {
        alert("SYSTEM_ERROR: Please enter a valid email");
        return;
    }

    auth.signInWithEmailAndPassword(email, pass)
        .then((userCredential) => {
            // UNLOCK SYSTEM
            unlockSystem(userCredential.user.email.split('@')[0].toUpperCase());
        })
        .catch((error) => {
            alert("AUTH_ERROR: " + error.message);
        });
}





function switchAuthMode(mode) {
    const slider = document.getElementById('auth-slider');
    if (mode === 'signup') {
        slider.style.transform = 'translateX(-33.333%)';
    } else if (mode === 'phone') {
        slider.style.transform = 'translateX(-66.666%)';
    } else {
        slider.style.transform = 'translateX(0%)';
    }
}

// Update your toggle functions to use the slider
function togglePhoneMode() {
    isPhoneMode = !isPhoneMode;
    switchAuthMode(isPhoneMode ? 'phone' : 'login');
}

// Add the Anonymous handler back to work with the icon
function handleAnonymousLogin() {
    showTechAlert("INITIALIZING_GUEST", "RESTRICTED_ACCESS_ENABLED");
    auth.signInAnonymously()
        .then(() => unlockSystem("GUEST_" + Math.floor(Math.random() * 9999)))
        .catch(err => alert("GUEST_BOOT_ERR: " + err.message));
}

        
        
// STEP 4: Social Login Function

function handleSocial(providerName) {
    let provider;
    if (providerName === 'google') provider = new firebase.auth.GoogleAuthProvider();
    if (providerName === 'github') provider = new firebase.auth.GithubAuthProvider();

    auth.signInWithPopup(provider)
        .then((result) => {
            // UNLOCK SYSTEM
            unlockSystem(result.user.displayName.toUpperCase());
        })
        .catch((error) => {
            alert("SOCIAL_AUTH_ERROR: " + error.message);
        });
}

// --- ANONYMOUS GUEST AUTH ---
// Added to bypass billing/SMS issues for immediate access
function handleAnonymousLogin() {
    showTechAlert("INITIALIZING_GUEST", "LIMITED_PRIVILEGES_APPLIED");

    auth.signInAnonymously()
        .then(() => {
            // Unlocks system with a unique temporary ID
            unlockSystem("GUEST_USER_" + Math.floor(1000 + Math.random() * 9000));
        })
        .catch((error) => {
            console.error("Anonymous Auth Failed:", error);
            alert("GUEST_BOOT_FAILED: " + error.message);
        });
}
        
// --- LOGIN MODAL CONTROL ---
function openLogin() {
    document.getElementById('login-modal').style.display = 'flex';
}

function closeLogin() {
    document.getElementById('login-modal').style.display = 'none';
}

let isLoginMode = true;
let isPhoneMode = false;
let confirmationResult; 

function toggleAuthMode() {
    isPhoneMode = false; 
    isLoginMode = !isLoginMode;
    
    const loginBtn = document.getElementById('login-btn');
    const signupBtn = document.getElementById('signup-btn');
    const toggleText = document.getElementById('auth-toggle-text');
    const desc = document.getElementById('auth-description');
    
    document.getElementById('email-auth-fields').style.display = 'block';
    document.getElementById('phone-auth-container').style.display = 'none';
    document.getElementById('social-container').style.display = 'flex';
    document.getElementById('divider-text').innerText = "OR_USE_EMAIL";
    document.getElementById('phone-toggle-text').innerText = "USE_PHONE_NUMBER";

    if (isLoginMode) {
        loginBtn.style.display = 'block';
        signupBtn.style.display = 'none';
        desc.innerText = "SELECT LOGIN PLATFORM IN HERE";
        toggleText.innerHTML = 'NO_ACCESS_KEY? <span onclick="toggleAuthMode()" style="color: var(--cyan); cursor: pointer; text-decoration: underline;">REGISTER_NEW_USER</span>';
    } else {
        loginBtn.style.display = 'none';
        signupBtn.style.display = 'block';
        desc.innerText = "CREATE NEW SYSTEM IDENTIFIER";
        toggleText.innerHTML = 'ALREADY_HAVE_KEY? <span onclick="toggleAuthMode()" style="color: var(--pink); cursor: pointer; text-decoration: underline;">RETURN_TO_LOGIN</span>';
    }
}

function togglePhoneMode() {
    isPhoneMode = !isPhoneMode;
    const emailFields = document.getElementById('email-auth-fields');
    const phoneFields = document.getElementById('phone-auth-container');
    const socialGrid = document.getElementById('social-container');
    const divider = document.getElementById('divider-text');
    const phoneToggle = document.getElementById('phone-toggle-text');
    const desc = document.getElementById('auth-description');

    if (isPhoneMode) {
        emailFields.style.display = 'none';
        socialGrid.style.display = 'none';
        phoneFields.style.display = 'block';
        desc.innerText = "INITIALIZE SECURE_MOBILE_LINK";
        divider.innerText = "SECURE_MOBILE_LINK";
        phoneToggle.innerText = "RETURN_TO_EMAIL";
    } else {
        emailFields.style.display = 'block';
        socialGrid.style.display = 'flex';
        phoneFields.style.display = 'none';
        desc.innerText = isLoginMode ? "SELECT LOGIN PLATFORM IN HERE" : "CREATE NEW SYSTEM IDENTIFIER";
        divider.innerText = "OR_USE_EMAIL";
        phoneToggle.innerText = "USE_PHONE_NUMBER";
    }
}

// --- PHONE AUTH LOGIC ---
function handlePhoneAuth() {
    const btn = document.getElementById('send-otp-btn');
    const phoneNumber = document.getElementById('phone-number').value;
    
    btn.innerText = "AUTHENTICATING...";
    btn.disabled = true;

    // Fixed: Initialize verifier once to prevent duplication errors
    if (!window.recaptchaVerifier) {
        window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container', {
            'size': 'invisible'
        });
    }

    auth.signInWithPhoneNumber(phoneNumber, window.recaptchaVerifier)
        .then((result) => {
            confirmationResult = result;
            document.getElementById('otp-verify-section').style.display = 'block';
            btn.style.display = 'none';
            showTechAlert("OTP_SENT", "CHECK_SMS_INBOX");
        }).catch((error) => {
            btn.innerText = "SEND_OTP_KEY";
            btn.disabled = false;
            
            // Check for Identity Platform billing issues
            if (error.code === 'auth/billing-not-enabled') {
                alert("CRITICAL_ERROR: Upgrade to Blaze Plan or use Testing Number.");
            } else if (error.code === 'auth/operation-not-allowed') {
                alert("REGION_LOCKED: Enable SMS for Sri Lanka in Firebase Console.");
            } else {
                alert("SMS_FAILED: " + error.message);
            }
        });
}

function verifyOtp() {
    const code = document.getElementById('verification-code').value;
    
    confirmationResult.confirm(code).then((result) => {
        const user = result.user;
        unlockSystem("MOBILE_USER_" + user.phoneNumber.slice(-4));
    }).catch((error) => {
        alert("INVALID_CODE: Verification failed.");
    });
}






        
        

function handleSignup() {
    const email = document.getElementById('login-email').value;
    const pass = document.getElementById('login-pass').value;

    if (pass.length < 6) {
        alert("SECURITY_FLAW: Password must be at least 6 characters.");
        return;
    }

    auth.createUserWithEmailAndPassword(email, pass)
        .then((userCredential) => {
            alert("CREDENTIALS_CREATED: Welcome to the system.");
            unlockSystem(email.split('@')[0].toUpperCase()); // Uses the first part of email as username
        })
        .catch((error) => {
            if (error.code === 'auth/email-already-in-use') {
                alert("ERROR: User already exists. Try logging in.");
            } else {
                alert("REGISTRATION_ERROR: " + error.message);
            }
        });
}

        

function unlockSystem(username) {
    alert("ACCESS_GRANTED: Welcome " + username);
    
    // Hide the login modal
    closeLogin();
    
    // Remove the blur/lock from the dashboard
    document.getElementById('main').classList.remove('locked');
    
    // Update the status bar
    document.getElementById('user-status-text').innerText = username;
    
    // Optional: Play a sound or trigger a final "boot" animation here
    console.log("System fully unlocked for user: " + username);
}



        
        

async function initBattery() {
    if ('getBattery' in navigator) {
        const battery = await navigator.getBattery();

        function updateBatteryUI() {
            // Convert level (0.0 to 1.0) to percentage (0 to 100)
            const level = Math.floor(battery.level * 100);
            
            // Update Text and Bar
            document.getElementById('bat-text').innerText = level + '%';
            document.getElementById('bat-bar').style.width = level + '%';
            
            // Change color based on level
            const bar = document.getElementById('bat-bar');
            if (level <= 20) {
                bar.style.background = "var(--pink)"; // Low battery warning
            } else {
                bar.style.background = "#00ff88"; // Healthy battery
            }

            // Update Charging Status
            const statusText = document.getElementById('pwr-status');
            const batIcon = document.getElementById('bat-icon');
            
            if (battery.charging) {
                statusText.innerText = "CHARGING_CONNECTED";
                statusText.style.color = "#00ff88";
                batIcon.className = "fas fa-battery-bolt"; // Change to bolt icon
            } else {
                statusText.innerText = "DISCHARGING_INTERNAL";
                statusText.style.color = "var(--cyan)";
                batIcon.className = "fas fa-battery-three-quarters";
            }
        }

        // Initial update
        updateBatteryUI();

        // Listen for real-time changes
        battery.addEventListener('levelchange', updateBatteryUI);
        battery.addEventListener('chargingchange', updateBatteryUI);
    } else {
        document.getElementById('pwr-status').innerText = "API_NOT_SUPPORTED";
    }
}

// Call the function
initBattery();

        

        function updateExtendedStats() {
            // Update CPU & RAM (already in your code, keeping it synced)
            const cpu = Math.floor(Math.random() * (55 - 20) + 20);
            document.getElementById('cpu-bar').style.width = cpu + '%';
            document.getElementById('cpu-text').innerText = cpu + '%';

            // Fake Battery Drain simulation
            let batLevel = parseInt(document.getElementById('bat-text').innerText);
            if (batLevel > 5) {
                document.getElementById('bat-bar').style.width = (batLevel - 0.01) + '%';
                // Note: Real battery API can be used, but this keeps the 'OS' feel.
            }

            // Update Logs
            const logContainer = document.getElementById('sys-logs');
            const activities = [
                "> INCOMING CONNECTION CLOAKED",
                "> DATA PACKET RECEIVED",
                "> PORT SCAN BLOCKED",
                "> SYSTEM OPTIMIZED",
                "> HEARTBEAT_PULSE: OK"
            ];
            const newLog = document.createElement('div');
            newLog.innerText = activities[Math.floor(Math.random() * activities.length)];
            logContainer.prepend(newLog);
            if(logContainer.children.length > 5) logContainer.lastChild.remove();
        }

        setInterval(updateExtendedStats, 3000);



        

        function updateLiveStats() {
            // Random CPU fluctuation
            const cpu = Math.floor(Math.random() * (60 - 30) + 30);
            const cpuBar = document.getElementById('cpu-bar');
            const cpuText = document.getElementById('cpu-text');
            if(cpuBar) {
                cpuBar.style.width = cpu + '%';
                cpuText.innerText = cpu + '%';
            }

            // Random Latency fluctuation
            const latency = Math.floor(Math.random() * (20 - 8) + 8);
            const latText = document.getElementById('latency-val');
            if(latText) latText.innerText = latency + 'ms';
        }

        // Run every 3 seconds
        setInterval(updateLiveStats, 3000);


        
        // Sidebar Toggle
        function toggleMenu() { 
            document.getElementById('sidebar').classList.toggle('open'); 
        }

        // Dropdown Logic
        function toggleSubMenu() {
            document.getElementById('api-submenu').classList.toggle('show');
            document.getElementById('api-arrow').classList.toggle('rotate');
        }

        // View Switcher
        function switchView(viewId) {
            document.querySelectorAll('.view-section').forEach(v => v.classList.remove('active-view'));
            
            // Handle active state for menu items
            document.querySelectorAll('.menu-item').forEach(m => m.classList.remove('active'));
            
            const activeView = document.getElementById('view-' + viewId);
            if(activeView) {
                activeView.classList.add('active-view');
            }
            
            const titles = {
                'dashboard': 'DASHBOARD',
                'social-dl': 'SOCIAL_DL',
                'official-api': 'OFFICIAL_API',
                'movie-api': 'MOVIE_API',
                'ai-hub': 'AI_HUB',
                'flexa': 'FLEXA_LITE'
            };
            
            document.getElementById('view-title').innerHTML = `Vajira<br>${titles[viewId]}`;
            toggleMenu();
        }



// Notification Logic
function toggleNotiWindow() {
    const win = document.getElementById('noti-window');
    win.style.display = win.style.display === 'none' ? 'block' : 'none';
    document.getElementById('noti-badge').style.display = 'none';
}

// Listen for Notifications from Firebase
db.ref('notifications').limitToLast(5).on('value', (snapshot) => {
    const content = document.getElementById('noti-content');
    const badge = document.getElementById('noti-badge');
    content.innerHTML = '';
    let count = 0;

    snapshot.forEach((child) => {
        const data = child.val();
        count++;
        const div = document.createElement('div');
        div.style.padding = "8px";
        div.style.borderBottom = "1px solid rgba(0,242,255,0.05)";
        div.innerHTML = `<span style="color:var(--pink)">[!]</span> ${data.message}<br><small style="opacity:0.3; font-size:0.6rem;">${data.time}</small>`;
        content.prepend(div);
    });

    if(count > 0) {
        badge.innerText = count;
        badge.style.display = 'block';
    }
});



        
    </script>





    
</body>
</html>
